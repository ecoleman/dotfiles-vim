#!/bin/bash

#FIELDS="+afkst"
FIELDS="+afksSimt"
CTAGS=ctags

CORE_PATH=${CORE_PATH:-/srv/phpfission/core}
CMS_PATH=${CMS_PATH:-/srv/phpfission/projects/cms/trunk}
TAGDIR=~/.vim.tags

[ ! -d $TAGDIR ] && mkdir $TAGDIR

echo "Generating Core Tags"
time $CTAGS -f $TAGDIR/pf_core \
-h ".php" -R \
--exclude="\.svn" \
--exclude="*\.sql" \
--totals=yes \
--tag-relative=yes \
--fields=$FIELDS \
--PHP-kinds=+cf "$CORE_PATH/classes" "$CORE_PATH/functions"

echo "Generating Trunk CMS Tags"
time $CTAGS -f $TAGDIR/pf_cms-trunk \
-h ".php" -R \
--exclude="\.svn" \
--exclude="*\.sql" \
--totals=yes \
--tag-relative=yes \
--fields=$FIELDS \
--languages=php \
--PHP-kinds=+cf "$CMS_PATH"

